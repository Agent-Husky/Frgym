<html>
    <head>
        <title>Friedrich-Gymnasium - Unsere Schule</title>
        <link rel="icon" href="pics/favicon.ico">
        <link rel="stylesheet" type="text/css" href="../css/style-white.css" title="Grundlayout">
        <link rel="alternate stylesheet" type="text/css" href="../css/style-dark.css" title="dunkel">
        <script src="./js/header.js"></script>
        <!-- <script type="text/javascript">
            var currentSheet = document.getElementById("stylesheet"),
            switcher = document.getElementById("styleswitcher");

            function loadStyle () {
                currentSheet.href = stylez;
            }

            switcher.addEventListener("click", function (ev) {
                var b = ev.target; // button

                if (b && b.hasAttribute("data-stylesheet")) {
                     stylez = b.getAttribute("data-stylesheet");
                } 

                loadStyle();
            });
        </script> -->
        <script>
            (function () {
                document.addEventListener("DOMContentLoaded", function () {

                    var currentSheet = document.getElementById("stylesheet"),
                    switcher = document.getElementById("styleswitcher");

                    function loadStyle () {
                        if (localStorage.getItem("stylez")) {
                            currentSheet.href = localStorage.getItem("stylez");
                        }
                    }

                    // only continue if required elements are present
                    if (currentSheet && switcher) {

                        // set previously stored stylesheet?
                        loadStyle();

                        // listen for clicks on buttons
                        switcher.addEventListener("click", function (ev) {
                            var b = ev.target; // button

                            if (b && b.hasAttribute("data-stylesheet")) {

                                // save value
                                localStorage.setItem(
                                    "stylez",
                                    b.getAttribute("data-stylesheet")
                                );

                                loadStyle();
                            }
                        });
                    }
                });
            }());
        </script>
    </head>
    <body class="body" id="#top">
        <div class="top-container">
            <img class="png-banner" src="/pics/bann_n2.png">
        </div>
        <div class="content" sticky>
            <div class="dropdown header sticky" style="position: sticky;">
            <button class="dropbtn" id="myHeader">Menu</button>
                <div class="dropdown-content">
                    <a href="./unsere%20Schule.html">Unsere Lehrer</a>
                    <a href="./unsere-Schule/geschichte/geschichte-main.html">Geschichte</a>
                    <a href="./unsere-Schule/rundgang.html">Rundgang</a>
                    <a href="./unsere-Schule/sch%C3%BCler.html">Schüler</a>
                    <a href="./unsere-Schule/zaitunk.html">Zaitunk</a>
                    <p style="text-align: center;">------------------</p>
                    <a href="./../index.html">Home</a>
                    <a href="./../unsere%20Schule.html">Unsere Schule</a>
                    <a href="./../vertretung.html">Vertretung</a>
                    <a href="./../termine.html">Termine</a>
                    <a href="http://www.org-gym.homepage.t-online.de/">Schulprogramm</a>
                    <a href="./../faecher.html">Fächer</a>
                    <a href="#">Veranstaltungen</a>
                    <a href="#">Wettbewerbe</a>
                    <a href="#">AG's</a>
                    <a href="#">Fortbildung</a>
                    <a href="#">Unsere Blogs</a>
                    <a href="#">Impressum</a>
                </div>
            </div>
        </div>
        <p>Ich weiss selbst nicht was hier mal entstehen soll(te)..</p>
        <p>Lass uns Pong spielen.</p>
        <script src="index.js"></script>
    <canvas id="Screen" width="500" height="300" 
    	style="
        border: 1px solid #000000;
    		background-color: #0000AF;
      "
    >
    </canvas>
    <p id="P1">Hi P1</p>
    <p id="P2">Hi P2</p> 
    <button 
      type="button" 
    	onclick="restartGame()" 
    	style="
    		position: absolute;
    		top: 320px;
    		left: 210px;
    		text-align: center;
    		background-color: var(--button-visable);
    		color: #FFFFFF;
    		border: none;
    		border-radius: 5px;
    		padding: 15px, 15px;
      "
    >
    	Restart Game?
    </button>
    <script>
    	var Location1 = 100;
    	var Location2 = 100;
      var superHitLeft = false;
      var superHitRight = false;
    	var updateCanvas;
    	var ballRadius = 10;
    	var LeftScore = 0;
    	var RightScore = 0;
    	var gameStarted = false;
    	var gameEnded = false;
    	var centerLineLocation = 247.5;
			var keys = [];
			var counter = 3;
      var leftMoving = false;
      var rightMoving = false;
    	var x = 250;
			var y = 150;
			var dz;
			var dv;
			var dx;
			var dy;
      var de;
      var df;
      var dg;
      var dh;
      var di;
      var dj;
      var dk;
      var dl;
			var P1 = document.getElementById("P1");
			var P2 = document.getElementById("P2");
    	var canvas = document.getElementById("Screen");
    	var ctx = canvas.getContext("2d");
    	ctx.fillStyle = "#FFFFFF";
			ctx.textAlign = "center";
			ctx.font = "30px Comic Sans Ms"
			ctx.fillText("Pong Remake", 250, 100);
			ctx.font = "20px Comic Sans Ms"
			ctx.fillText("Code by: SingularityV3", 250, 140);
			ctx.fillText("This game is intended", 250, 170);
			ctx.fillText("for two player use", 250, 195);
			setTimeout(function () {
        if (gameStarted == false) {
          ctx.fillText("Click anywhere to continue", 250, 230);
        };
			}, 750);
			function buttonColor() {
				gameEnded = true;
				document.documentElement.style.setProperty(
					'--button-visable',
					'#0000AF'
				);
			};
			function restartGame() {
				if (gameEnded == true) {
					document.location.reload();
				};
			};
      function randomizeBall() {
        dz = Math.floor(Math.random()*2);
			  dw = Math.floor(Math.random()*5);
        if (dw == 0) {
				  dy = 2;
			  } else if (dw == 1) {
				  dy = 1;
			  } else if (dw == 2) {
				  dy = 0;
			  } else if (dw == 3) {
				  dy = -1;
			  } else {
				  dy = -2;
			  };
			  if (dy == 1 || dy == -1) {
				  dv = 3;
			  } else  if (dy == 0) {
				  dv = 4;
			  } else {
				  dv = 2;
			  };
			  if (dz == 0) {
				  dx = dv;
			  } else {
				  dx = -dv;
			  };
      };
      randomizeBall();
			function beginGame () {
				ctx.font = "30px Comic Sans Ms"
				ctx.textAlign = "center";
				ctx.clearRect(0, 0, 500, 300);
				ctx.fillText("3", 250, 150);
				setTimeout(function() {
				  ctx.clearRect(0, 0, 500, 300);
				  ctx.fillText("2", 250, 150)
				}, 750);
				setTimeout(function() {
				  ctx.clearRect(0, 0, 500, 300);
				  ctx.fillText("1", 250, 150)
				}, 1500);
				setTimeout(function() {
				  ctx.clearRect(0, 0, 500, 300);
				  ctx.fillText("Go!", 250, 150)
				}, 2250);
			  setTimeout(function () {
			  updateCanvas = setInterval(draw, 7);
			  function drawBall() {
    		ctx.beginPath();
    		ctx.arc(x, y, ballRadius, 0, Math.PI*2);
    		ctx.fill();
			};
      function leftPaddleCD() {
        if (leftMoving == "up") {
          de = 2;
          df = 0;
          dk = 3;
        } else if (leftMoving == "down") {
          de = 0;
          df = 2;
          dk = 3;
        } else {
          de = 1;
          df = 1;
          dk = 4;
        };
        if (x + dx < ballRadius) {
    			if (
						y > Location1 &&
						y < Location1 + 50) {
    				dy = -de;
    				dx = dk;
    			} else if (
    				y > Location1 + 50 &&
    				y < Location1 + 100) {
    				dy = df;
    				dx = dk;
    			} else if (
    				y == Location1 + 50) {
    					dy = 0;
    					dx = 6;
              superHitLeft = true;
    			} else {
            resetBall();
						RightScore++;
    			};
				};
      };
      function rightPaddleCD() {
        if (rightMoving == "up") {
          dg = 2;
          dh = 0;
          dl = -3;
        } else if (rightMoving == "down") {
          dg = 0;
          dh = 2;
          dl = -3;
        } else {
          dg = 1;
          dh = 1;
          dl = -4;
        };
        if (x + dx > 500-ballRadius) {
    			if (
						y > Location2 &&
						y < Location2 + 50) {
    				dy = -dg;
    				dx = dl;
    			} else if (
    				y > Location2 + 50 &&
    				y < Location2 + 100) {
    				dy = dh;
    				dx = dl;
    			} else if (
    				y == Location2 + 50) {
    					dy = 0;
    					dx = -6;
              superHitRight = true;
    			} else {
            resetBall();
						LeftScore++;
    			};
				};
      };
      function paddleCD() {
        leftPaddleCD();
        rightPaddleCD();
      };
      function ballMomentum() {
        x += dx;
    		y += dy;
      };
			function drawRackets() {
				ctx.closePath();
    		ctx.fillStyle = "#FFFFFF";
				ctx.fillRect (0,Location1,7,100);
				ctx.fillRect (493,Location2,7,100);
				ctx.fillRect (centerLineLocation, 0, 5, 300);
			};
      function resetBall() {
        x = 250;
        y = 150;
        dx = 0;
        dy = 0;
        setTimeout(function() {
          randomizeBall()
        }, 500);
      };
      function winGame() {
        if (LeftScore == 10) {
					clearInterval(updateCanvas);
					ctx.clearRect(0, 0, 500, 300);
					ctx.font = "30px Comic Sans MS";
					ctx.fillText("Player 1 won!", 250, 150);
					buttonColor();
				}; 
        if (RightScore == 10) {
					clearInterval(updateCanvas);
					ctx.clearRect(0, 0, 500, 300);
					ctx.font = "30px Comic Sans MS";
					ctx.fillText("Player 2 won!", 250, 150);
					buttonColor();
				};
        P1.innerHTML = "Player 1 score: " + LeftScore;
				P2.innerHTML = "Player 2 score: " + RightScore;
      };
      function wallDetection() {
        if (y + dy > 300-ballRadius || y + dy < ballRadius) {
    			dy = -dy;
				};
      };
			function draw() {
    		ctx.clearRect(0, 0, 500, 300);
    		drawBall();
        drawRackets();
        wallDetection();
        paddleCD();
    		ballMomentum();
        winGame();
				if (keys[40] && Location2 < 200) {
          rightMoving = "down"
        	Location2 += 5;
    		} else if (keys[38] && Location2 > 0) {
          rightMoving = "up"
        	Location2 -= 5;
  		  } else {
          rightMoving = false;
        };
    		if (keys[83] && Location1 < 200) {
          leftMoving = "down"
        	Location1 += 5;
    		} else if (keys[87] && Location1 > 0) {
          leftMoving = "up"
        	Location1 -= 5;
    		} else {
          leftMoving = false;
        };
			};
			document.body.addEventListener("keydown", function (e) {
    			keys[e.keyCode] = true;
				}
			);
			document.body.addEventListener("keyup", function (e) {
    			keys[e.keyCode] = false;
				}
			);
		}, 3000);
	};
		document.getElementById("Screen").addEventListener(
      "click", function() {
				if (gameStarted == false) {
    			beginGame();
					gameStarted = true;
				};
			}
		);
    </script>
    </body>
</html>